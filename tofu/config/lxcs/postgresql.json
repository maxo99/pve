{
    "container_name": "postgresql-db",
    "container_id": 2006,
    "node_name": "pve-01",
    "description": "Container LXC PostgreSQL Database Server",
    "tags": ["db", "postgresql", "sql", "lxc"],
    "memory": 2048,
    "cores": 2,
    "disk_size": 15,
    "network_bridge": "vmbr0",
    "ip_config": {
      "ipv4_address": "dhcp",
      "gateway": ""
    },
    "datastore_id": "local-lvm",
    "feature_nesting": true,
    "unprivileged": true,
    "start_at_boot": true,
    "generate_admin_password": false,
    "admin_user": "postgres",
    "vault_kv_path": "lxc/passwords/postgresql",
    "packages": [
      "postgresql",
      "postgresql-contrib",
      "postgresql-client"
    ],
    "custom_scripts": [
      "# Configure PostgreSQL",
      "systemctl start postgresql",
      "systemctl enable postgresql",
      "# Set postgres user password",
      "sudo -u postgres psql -c \"ALTER USER postgres PASSWORD 'PASSWORD_PLACEHOLDER';\"",
      "# Configure PostgreSQL to accept connections",
      "echo \"listen_addresses = '*'\" >> /etc/postgresql/14/main/postgresql.conf",
      "echo \"host all all 0.0.0.0/0 md5\" >> /etc/postgresql/14/main/pg_hba.conf",
      "# Restart PostgreSQL to apply changes",
      "systemctl restart postgresql",
      "# Create a sample database",
      "sudo -u postgres createdb sampledb",
      "echo 'PostgreSQL setup completed successfully!'"
    ]
  }
